<div
  class="bg-hive-500 rounded-2xl p-6 relative shadow-hive hover:shadow-xl transition-shadow duration-300 text-inverse flex flex-col"
  @scoreAnimation
>
  <div class="relative z-10 flex flex-col flex-grow">
    <div class="flex items-start justify-between mb-4">
      <div>
        <h3 class="text-sm font-medium text-hive-100 mb-1">Credit Score</h3>
        <p class="text-xs text-hive-200">{{ level }}</p>
      </div>
      <span
        class="px-3 py-1 rounded-full text-xs font-semibold"
        [style.background-color]="getTierColor() + '20'"
        [style.color]="getTierColor()"
      >
        {{ tier }}
      </span>
    </div>

    <div class="flex flex-col items-center gap-4 my-auto">
      <!-- Circular Progress -->
      <div class="relative">
        <svg class="transform -rotate-90" width="120" height="120">
          <!-- Background circle -->
          <circle
            cx="60"
            cy="60"
            r="54"
            class="stroke-white/20"
            stroke-width="7"
            fill="none"
          />
          <!-- Progress circle -->
          <circle
            cx="60"
            cy="60"
            r="54"
            [attr.stroke]="getTierColor()"
            stroke-width="7"
            fill="none"
            [attr.stroke-dasharray]="circumference"
            [attr.stroke-dashoffset]="getStrokeDashoffset()"
            stroke-linecap="round"
            class="transition-all duration-1000 ease-out"
            style="filter: drop-shadow(0 0 6px currentColor)"
          />
        </svg>

        <!-- Score in center -->
        <div class="absolute inset-0 flex items-center justify-center flex-col">
          <span class="text-3xl font-display font-bold text-inverse">
            {{ animatedScore() }}
          </span>
          <span class="text-xs text-hive-200">/ 900</span>
        </div>
      </div>

      <div class="w-full space-y-3">
        <div>
          <div class="flex justify-between items-center mb-1.5">
            <span class="text-sm text-hive-100"
              >Progress to
              {{
                tier === "Bronze"
                  ? "Silver"
                  : tier === "Silver"
                    ? "Gold"
                    : "Max"
              }}</span
            >
            <span class="text-sm font-semibold text-honey-500"
              >{{ progress() | number: "1.0-0" }}%</span
            >
          </div>
          <div class="h-1.5 bg-white/20 rounded-full overflow-hidden">
            <div
              class="h-full bg-gradient-to-r from-honey-400 to-honey-500 rounded-full transition-all duration-1000 ease-out"
              [style.width.%]="progress()"
            ></div>
          </div>
        </div>
        <div class="space-y-1">
          <div class="flex items-center justify-between text-sm">
            <span class="text-hive-200">Next milestone</span>
            <span class="font-semibold text-inverse">{{ nextTierScore }}</span>
          </div>
          <div class="flex items-center justify-between text-sm">
            <span class="text-hive-200">Points needed</span>
            <span class="font-semibold text-honey-500"
              >+{{ nextTierScore - creditScore }}</span
            >
          </div>
        </div>

        <button
          class="mt-4 w-full btn-secondary text-sm py-2 hover:shadow-md transition-all duration-300"
        >
          Improve Score
        </button>
      </div>
    </div>
  </div>
</div>
