<div class="p-4 md:p-6 space-y-6">
  <app-page-header
    pageTitle="My Circles"
    actionLabel="Create Circle"
    [actionIcon]="Plus"
    (actionClick)="onCreateCircle()"
  ></app-page-header>

  @if (isLoading()) {
  <div class="flex items-center justify-center min-h-[30vh]">
    <p class="text-text-secondary font-medium">Loading your circles...</p>
  </div>
  } @else if (error()) {
  <div class="bg-danger-light text-danger-dark p-4 rounded-hive border border-danger-light">
    {{ error() }}
  </div>
  } @else {
  <!-- Active Circles Section -->
  @if (activeCircles().length === 0) {
  <!-- Empty State -->
  <div class="dashboard-card border-dashed border-2 border-cream-300 bg-cream-50 flex flex-col items-center justify-center text-center p-12">
    <div class="w-16 h-16 bg-cream-100 rounded-full flex items-center justify-center mb-4">
      <lucide-angular [img]="Plus" class="w-8 h-8 text-cream-400"></lucide-angular>
    </div>
    <h3 class="text-xl font-display font-bold text-text-primary mb-2">
      No Active Circles Yet
    </h3>
    <p class="text-text-secondary mb-8 max-w-[300px]">
      When you join or create a circle, it will appear here.
    </p>
    <button
      class="btn-outline"
      (click)="onCreateCircle()"
    >
      <span>Create a New Circle</span>
    </button>
  </div>
  } @else {
  <div class="space-y-4 mb-8">
    <h3 class="font-display font-bold text-lg text-text-primary">Active Circles</h3>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      @for (circle of activeCircles(); track circle.id) {
      <app-circle-card
        [circle]="circle"
        [isFeatured]="false"
        (circleClick)="onCircleClick($event)"
      />
      }
    </div>
  </div>
  }

  <!-- Completed Circles Section -->
  @if (completedCircles().length > 0) {
  <div class="space-y-4 mb-8">
    <h3 class="font-display font-bold text-lg text-text-primary">Completed Circles</h3>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      @for (circle of completedCircles(); track circle.id) {
      <app-circle-card
        [circle]="circle"
        [isFeatured]="false"
        (circleClick)="onCircleClick($event)"
      />
      }
    </div>
  </div>
  } }
</div>

<!-- Create Circle Modal -->
@if (showCreateModal()) {
<app-create-circle-modal
  (closeModal)="onCloseModal()"
  (circleCreated)="onCircleCreated()"
/>
}
